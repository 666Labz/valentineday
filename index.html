<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Buku Valentine</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/page-flip@2.0.7/dist/js/page-flip.browser.min.js"></script>

<style>
body{
    margin:0;
    background:radial-gradient(circle at top,#2a0a14,#000);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    min-height:100vh;
    overflow:hidden;
    font-family:Poppins,sans-serif;
    padding-top:14px;
}

h1{
    font-family:'Great Vibes',cursive;
    font-size:30px;
    color:#ff9fc4;
    margin:6px 0 4px;
    text-shadow:
        0 0 6px rgba(255,140,180,.6),
        0 0 14px rgba(255,80,140,.5);
}

button{
    background:linear-gradient(45deg,#ff4d6d,#ff85a1);
    color:white;
    border:none;
    padding:6px 18px;
    border-radius:20px;
    cursor:pointer;
    margin-bottom:10px;
    font-size:12px;
    box-shadow:0 0 12px rgba(255,100,150,.6);
}

#wrap{
    width:100%;
    display:flex;
    justify-content:center;
    align-items:center;
}

#book{
    width:360px;
    height:520px;
    transform-origin:top center;
}

/* scaling HP */
@media(max-width:480px){
    #book{
        transform:scale(0.8);
    }
}

/* halaman */
.page{
    background:white;
    overflow:hidden;
    border-radius:10px;
    box-shadow:
        inset 0 0 10px rgba(0,0,0,.15),
        0 6px 18px rgba(255,120,170,.45);
}

.page img{
    width:200%;
    height:100%;
    object-fit:cover;
}

.left img{transform:translateX(0)}
.right img{transform:translateX(-50%)}

/* bunga */
.flower{
    position:fixed;
    top:-40px;
    font-size:16px;
    animation:fall linear forwards;
    pointer-events:none;
}

@keyframes fall{
    to{transform:translateY(110vh) rotate(360deg);opacity:0}
}
</style>
</head>

<body>

<h1>Happy Valentine Sayang</h1>
<button onclick="toggleMusic()">â–¶ Play Music</button>

<div id="wrap">
    <div id="book"></div>
</div>

<audio id="music" src="music.mp3" loop></audio>
<audio id="flip" src="flip.mp3"></audio>

<script>
const spreads=[
    "spread1.jpg",
    "spread2.jpg",
    "spread3.jpg"
];

const pages=[];
pages.push("cover-depan.jpg");

spreads.forEach(src=>{
    pages.push({src,side:"left"});
    pages.push({src,side:"right"});
});

pages.push("cover-belakang.jpg");

let book;

/* INIT DELAY â†’ BIAR LAYOUT SIAP */
setTimeout(()=>{

    book=new St.PageFlip(
        document.getElementById("book"),
        {
            width:360,
            height:520,
            showCover:true,
            size:"fixed",
            flippingTime:900,
            maxShadowOpacity:0.6,
            useMouseEvents:true,
            mobileScrollSupport:true
        }
    );

    const elements=pages.map(p=>{
        const div=document.createElement("div");
        div.className="page";

        if(typeof p==="string"){
            div.innerHTML=`<img src="${p}" style="width:100%">`;
        }else{
            div.classList.add(p.side);
            div.innerHTML=`<img src="${p.src}">`;
        }
        return div;
    });

    book.loadFromHTML(elements);

    const flipSound=document.getElementById("flip");
    book.on("flip",()=>{
        flipSound.currentTime=0;
        flipSound.play();
    });

},120);

/* bunga */
setInterval(()=>{
    const flower=document.createElement("div");
    flower.className="flower";
    flower.innerHTML=["ðŸŒ¸","ðŸŒº","ðŸŒ·","ðŸ’®"][Math.floor(Math.random()*4)];
    flower.style.left=Math.random()*window.innerWidth+"px";
    flower.style.animationDuration=(3+Math.random()*3)+"s";
    document.body.appendChild(flower);
    setTimeout(()=>flower.remove(),6000);
},800);

/* musik */
let play=false;
function toggleMusic(){
    const m=document.getElementById("music");
    play=!play;
    play?m.play():m.pause();
}
</script>

</body>
</html>
