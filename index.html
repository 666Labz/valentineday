<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Buku Valentine</title>

<script src="https://cdn.jsdelivr.net/npm/page-flip@2.0.7/dist/js/page-flip.browser.min.js"></script>

<style>
body{
    margin:0;
    background:radial-gradient(circle at top,#2a0a14,#000);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    min-height:100vh;
    overflow:hidden;
    font-family:Segoe UI,sans-serif;
}

h1{
    color:#ff7aa2;
    margin:6px;
    font-size:16px;
    text-shadow:0 0 10px rgba(255,120,170,.7);
}

button{
    background:linear-gradient(45deg,#ff4d6d,#ff85a1);
    color:white;
    border:none;
    padding:6px 18px;
    border-radius:20px;
    cursor:pointer;
    margin-bottom:6px;
    font-size:12px;
    box-shadow:0 0 15px rgba(255,100,150,.6);
}

/* ukuran PAS HP */
#book{
    width:92vw;
    height:52vh;
}

/* halaman */
.page{
    background:white;
    overflow:hidden;
    border-radius:8px;
    box-shadow:
        inset 0 0 8px rgba(0,0,0,.15),
        0 6px 18px rgba(255,120,170,.45);
}

/* gambar */
.page img{
    width:200%;
    height:100%;
    object-fit:cover;
}

/* potong kiri kanan */
.left img{transform:translateX(0)}
.right img{transform:translateX(-50%)}

/* bunga jatuh */
.flower{
    position:fixed;
    top:-40px;
    font-size:16px;
    animation:fall linear forwards;
    pointer-events:none;
}

@keyframes fall{
    to{transform:translateY(110vh) rotate(360deg);opacity:0}
}
</style>
</head>

<body>

<h1>Happy Valentine Sayang ‚ù§Ô∏è</h1>
<button onclick="toggleMusic()">‚ñ∂ Play Music</button>

<div id="book"></div>

<audio id="music" src="music.mp3" loop></audio>
<audio id="flip" src="flip.mp3"></audio>

<script>
const spreads=[
    "spread1.jpg",
    "spread2.jpg",
    "spread3.jpg"
];

const pages=["cover-depan.jpg"];

spreads.forEach(src=>{
    pages.push({src,side:"left"});
    pages.push({src,side:"right"});
});

pages.push("cover-belakang.jpg");

/* ukuran engine flip disesuaikan HP */
const book=new St.PageFlip(
    document.getElementById("book"),
    {
        width:280,
        height:400,
        showCover:true,
        size:"fixed",
        flippingTime:900,
        maxShadowOpacity:0.5,
        useMouseEvents:true,
        mobileScrollSupport:true
    }
);

const elements=pages.map(p=>{
    const div=document.createElement("div");
    div.className="page";

    if(typeof p==="string"){
        div.innerHTML=`<img src="${p}" style="width:100%">`;
    }else{
        div.classList.add(p.side);
        div.innerHTML=`<img src="${p.src}">`;
    }
    return div;
});

book.loadFromHTML(elements);

/* suara kertas */
const flipSound=document.getElementById("flip");
book.on("flip",()=>{
    flipSound.currentTime=0;
    flipSound.play();
});

/* hujan bunga */
setInterval(()=>{
    const flower=document.createElement("div");
    flower.className="flower";
    flower.innerHTML=["üå∏","üå∫","üå∑","üíÆ"][Math.floor(Math.random()*4)];
    flower.style.left=Math.random()*window.innerWidth+"px";
    flower.style.animationDuration=(3+Math.random()*3)+"s";
    document.body.appendChild(flower);
    setTimeout(()=>flower.remove(),6000);
},650);

/* musik */
let play=false;
function toggleMusic(){
    const m=document.getElementById("music");
    play=!play;
    play?m.play():m.pause();
}
</script>

</body>
</html>
